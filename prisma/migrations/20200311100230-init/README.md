# Migration `20200311100230-init`

This migration has been generated by jw.kim at 3/11/2020, 10:02:30 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `prisma2_test`.`BreakDown` (
    `brakeDate` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `carNumber` varchar(191) NOT NULL DEFAULT '' ,
    `code` varchar(191)   ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `lat` varchar(191) NOT NULL DEFAULT '' ,
    `lng` varchar(191) NOT NULL DEFAULT '' ,
    `modelId` varchar(191) NOT NULL DEFAULT '' ,
    `number` int NOT NULL DEFAULT 0 ,
    `repairDate` datetime(3)   ,
    `shop` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `prisma2_test`.`BreakdownTimeLine` (
    `BreakDown` varchar(191) NOT NULL ,
    `code` varchar(191) NOT NULL DEFAULT '' ,
    `codeText` varchar(191) NOT NULL DEFAULT '' ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `lat` varchar(191) NOT NULL DEFAULT '' ,
    `lng` varchar(191) NOT NULL DEFAULT '' ,
    `repairShop` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `prisma2_test`.`Emergency` (
    `carNumber` varchar(191) NOT NULL DEFAULT '' ,
    `completeAt` datetime(3)   ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `isComplete` boolean NOT NULL DEFAULT false ,
    `lat` varchar(191) NOT NULL DEFAULT '' ,
    `lng` varchar(191) NOT NULL DEFAULT '' ,
    `reason` ENUM('OVERTURN', 'BUTTON')   ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `prisma2_test`.`EmergencyTimeLine` (
    `Emergency` varchar(191) NOT NULL ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `historyDesc` varchar(191)   ,
    `id` varchar(191) NOT NULL  ,
    `status` ENUM('REQUEST', 'PROGRESS', 'SUCCESS')   ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE  INDEX `BreakDown` ON `prisma2_test`.`BreakdownTimeLine`(`BreakDown`)

CREATE  INDEX `Emergency` ON `prisma2_test`.`EmergencyTimeLine`(`Emergency`)

ALTER TABLE `prisma2_test`.`BreakdownTimeLine` ADD FOREIGN KEY (`BreakDown`) REFERENCES `prisma2_test`.`BreakDown`(`id`) ON DELETE RESTRICT ON UPDATE CASCADE

ALTER TABLE `prisma2_test`.`EmergencyTimeLine` ADD FOREIGN KEY (`Emergency`) REFERENCES `prisma2_test`.`Emergency`(`id`) ON DELETE RESTRICT ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200311100230-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,71 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "mysql"
+  url      = env("DATABASE_URL")
+}
+
+model BreakDown {
+  brakeDate  DateTime
+  carNumber  String              @default("")
+  code       String?
+  id         String              @id @default(uuid())
+  lat        String              @default("")
+  lng        String              @default("")
+  modelId    String              @default("")
+  number     Int                 @default(0)
+  repairDate DateTime?
+  shop       String              @default("")
+  updatedAt  DateTime            @updatedAt
+  createdAt  DateTime            @default(now())
+  timeline   BreakdownTimeLine[] @relation(name: "BreakDownTimeLine")
+}
+
+model BreakdownTimeLine {
+  code       String    @default("")
+  codeText   String    @default("")
+  id         String    @id @default(uuid())
+  lat        String    @default("")
+  lng        String    @default("")
+  repairShop String    @default("")
+  updatedAt  DateTime  @updatedAt
+  createdAt  DateTime  @default(now())
+  BreakDown  BreakDown @relation(name: "BreakDownTimeLine")
+
+  @@index([BreakDown], name: "BreakDown")
+}
+
+model Emergency {
+  carNumber  String              @default("")
+  completeAt DateTime?
+  id         String              @id @default(uuid())
+  isComplete Boolean             @default(false)
+  lat        String              @default("")
+  lng        String              @default("")
+  reason     EmergencyReason?
+  updatedAt  DateTime            @updatedAt
+  createdAt  DateTime            @default(now())
+  timeline   EmergencyTimeLine[] @relation(name: "EmergencyTimeLine")
+}
+
+model EmergencyTimeLine {
+
+  historyDesc String?
+  id          String           @id @default(uuid())
+  status      EmergencyStatus?
+  updatedAt   DateTime         @default(now())
+  createdAt   DateTime         @updatedAt
+  Emergency   Emergency        @relation(name: "EmergencyTimeLine")
+
+  @@index([Emergency], name: "Emergency")
+}
+
+enum EmergencyReason {
+  OVERTURN BUTTON
+}
+
+enum EmergencyStatus {
+  REQUEST PROGRESS SUCCESS
+}
```


